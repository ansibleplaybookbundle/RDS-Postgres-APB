FROM ansibleplaybookbundle/apb-base
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjCiMgU2hhcmVkIFBhcmFtZXRlcnMKIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
Cl9wOiAmX3AKICAtIG5hbWU6IGF3c19hY2Nlc3Nfa2V5CiAgICBkZXNjcmlwdGlvbjogYXdzIGFj\
Y2VzcyBrZXkgdG8gYXV0aGVudGljYXRlIHRvIGF3cyB3aXRoCiAgICB0eXBlOiBzdHJpbmcKICAt\
IG5hbWU6IGF3c19zZWNyZXRfa2V5CiAgICBkZXNjcmlwdGlvbjogYXdzIHNlY3JldCBrZXkgdG8g\
YXV0aGVudGljYXRlIHRvIGF3cyB3aXRoCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IGJhY2t1\
cF9yZXRlbnRpb24KICAgIGRlc2NyaXB0aW9uOiBiYWNrdXAgcmV0ZW50aW9uIHBlcmlvZAogICAg\
dHlwZTogaW50CiAgICBkZWZhdWx0OiAwCiAgLSBuYW1lOiBkYl9lbmdpbmUKICAgIGRlc2NyaXB0\
aW9uOiBkYXRhYmFzZSBlbmdpbmUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogcG9zdGdy\
ZXMKICAtIG5hbWU6IGRiX25hbWUKICAgIGRlc2NyaXB0aW9uOiBuYW1lIG9mIHRoZSBkYXRhYmFz\
ZSB0byBjcmVhdGUKICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogdGVzdGRiCiAgLSBuYW1l\
OiBkYl9wYXNzd29yZAogICAgZGVzY3JpcHRpb246IG1hc3RlciBwYXNzd29yZAogICAgdHlwZTog\
c3RyaW5nCiAgICBkZWZhdWx0OiBkYnBhc3N3ZAogIC0gbmFtZTogZGJfc2l6ZQogICAgZGVzY3Jp\
cHRpb246IHNpemUgb2YgdGhlIGRiIGluIGdiCiAgICB0eXBlOiBpbnQKICAgIGRlZmF1bHQ6IDEw\
CiAgLSBuYW1lOiBkYl91c2VybmFtZQogICAgZGVzY3JpcHRpb246IG1hc3RlciBkYiB1c2VybmFt\
ZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiBkYnVzZXIKICAtIG5hbWU6IGVuZ2luZV92\
ZXJzaW9uCiAgICBkZXNjcmlwdGlvbjogZGIgZW5naW5lIHZlcnNpb24KICAgIHR5cGU6IHN0cmlu\
ZwogICAgZGVmYXVsdDogOS42LjEKICAtIG5hbWU6IGluc3RhbmNlX3R5cGUKICAgIGRlc2NyaXB0\
aW9uOiBhd3MgaW5zdGFuY2UgdHlwZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZhdWx0OiBkYi5t\
My5tZWRpdW0KICAtIG5hbWU6IHBvcnQKICAgIGRlc2NyaXB0aW9uOiBwb3J0IHRoZSBkYXRhYmFz\
ZSB3aWxsIGxpc3RlbiBvbgogICAgdHlwZTogaW50CiAgICBkZWZhdWx0OiA1NDMyCiAgLSBuYW1l\
OiByZWdpb24KICAgIGRlc2NyaXB0aW9uOiBhd3MgcmVnaW9uCiAgICB0eXBlOiBzdHJpbmcKICAt\
IG5hbWU6IHN1Ym5ldAogICAgZGVzY3JpcHRpb246IHZwYyBzdWJuZXQgdG8gZGVwbG95IGluc3Rh\
bmNlIG9uCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHZwY19zZWN1cml0eV9ncm91cHMKICAg\
IGRlc2NyaXB0aW9uOiB2cGMgc2VjdXJpdHkgZ3JvdXBzIHRvIGFzc2lnbiB0byB0aGUgaW5zdGFu\
Y2UKICAgIHR5cGU6IHN0cmluZwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCnZlcnNpb246IDEuMC4w\
Cm5hbWU6IHJkcy1wb3N0Z3Jlcy1hcGIKZGVzY3JpcHRpb246IE1hbmFnZWQgcmVsYXRpb25hbCBk\
YXRhYmFzZSBzZXJ2aWNlIHdpdGggYSBjaG9pY2Ugb2Ygc2l4IHBvcHVsYXIgZGF0YWJhc2UgZW5n\
aW5lcy4gIFNldCB1cCwgb3BlcmF0ZSwgYW5kIHNjYWxlIGEgcmVsYXRpb25hbCBkYXRhYmFzZSBp\
biB0aGUgY2xvdWQgd2l0aCBqdXN0IGEgZmV3IGNsaWNrcy4KdGFnczoKICAtIGFtYXpvbgogIC0g\
ZGF0YWJhc2UKYmluZGFibGU6IHRydWUKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRhOgogIGRpc3Bs\
YXlOYW1lOiAiQW1hem9uIFJEUyAtIFBvc3RncmVTUUwgKEFQQikiCiAgbG9uZ0Rlc2NyaXB0aW9u\
OiAiQW1hem9uIFJlbGF0aW9uYWwgRGF0YWJhc2UgU2VydmljZSAoQW1hem9uIFJEUykgbWFrZXMg\
aXQgZWFzeSB0byBzZXQgdXAsIG9wZXJhdGUsIGFuZCBzY2FsZSBhIHJlbGF0aW9uYWwgZGF0YWJh\
c2UgaW4gdGhlIGNsb3VkLiBJdCBwcm92aWRlcyBjb3N0LWVmZmljaWVudCBhbmQgcmVzaXphYmxl\
IGNhcGFjaXR5IHdoaWxlIG1hbmFnaW5nIHRpbWUtY29uc3VtaW5nIGRhdGFiYXNlIGFkbWluaXN0\
cmF0aW9uIHRhc2tzLCBmcmVlaW5nIHlvdSB1cCB0byBmb2N1cyBvbiB5b3VyIGFwcGxpY2F0aW9u\
cyBhbmQgYnVzaW5lc3MuIEFtYXpvbiBSRFMgcHJvdmlkZXMgeW91IHNpeCBmYW1pbGlhciBkYXRh\
YmFzZSBlbmdpbmVzIHRvIGNob29zZSBmcm9tLCBpbmNsdWRpbmcgQW1hem9uIEF1cm9yYSwgUG9z\
dGdyZVNRTCwgTXlTUUwsIE1hcmlhREIsIE9yYWNsZSwgYW5kIE1pY3Jvc29mdCBTUUwgU2VydmVy\
LiIKICBpbWFnZVVybDogImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS9mdXNvci8yMDE3ZGVtby9E\
YXRhYmFzZV9BbWF6b25SRFNfUG9zdGdyZVNRTGluc3RhbmNlLnBuZyIKICBkb2N1bWVudGF0aW9u\
VXJsOiAiaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yZHMvIgogIGRlcGVuZGVuY2llczogW10KICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiQW1hem9uIgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAg\
IGRlc2NyaXB0aW9uOiBSRFMgUG9zdGdyZXNxbCBkZXBsb3ltZW50IHRvIEFXUwogICAgZnJlZTog\
dHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBEZWZhdWx0CiAgICAgIGxvbmdE\
ZXNjcmlwdGlvbjogVGhpcyBwbGFuIHByb3ZpZGVzIGFuIFJEUyBQb3N0Z3Jlc3FsIGRlcGxveW1l\
bnQgdG8gQW1hem9uIFdlYiBTdG9yYWdlCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJz\
OiAqX3AK"
COPY roles /opt/ansible/roles
COPY playbooks /opt/apb/actions
RUN chmod -R g=u /opt/{ansible,apb}

RUN yum -y install python-boto postgresql && yum clean all

USER apb
